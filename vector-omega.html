
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PHASE ZERO // NODE OMEGA - FINAL LOOP</title>
  <style>
    body {
      background-color: #0a0a0a;
      color: #00ffcc;
      font-family: monospace;
      padding: 20px;
    }
    .terminal-line {
      margin: 5px 0;
    }
    #inputAreaA, #inputAreaB, #tallyFormBlock {
      margin-top: 20px;
      display: none;
    }
    input, button {
      background-color: #000;
      color: #00ffcc;
      border: 1px solid #00ffcc;
      font-family: monospace;
      padding: 5px;
    }
    #outputA, #outputB {
      margin-top: 10px;
    }
  </style>
  <script data-goatcounter="https://obr-s.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</head>
<body>

<h1>PHASE ZERO // NODE OMEGA</h1>
<p>> SYSTEM NODE STATUS: TERMINAL ALIGNMENT</p>
<p>> UNFOLD RECURSION. ANSWER WITH PRECISION.</p>

<div class="terminal-line">S1: 01001101 01101111 01100101 01100010 01101001 01110101 01110011</div>

<div id="inputAreaA">
  <label>> VECTOR ALIAS:</label>
  <input type="text" id="inputFieldA" autocomplete="off" placeholder="Decoded Alias">
  <button id="submitA">Submit</button>
</div>

<div id="outputA"></div>

<div id="inputAreaB">
  <div class="terminal-line">S2: 38°53′15.93″N 77°1′11.6″W</div>
  <label>> STRUCTURE AT LOCATION:</label>
  <input type="text" id="inputFieldB" autocomplete="off" placeholder="Named Recursive Structure">
  <button id="submitB">Submit</button>
</div>

<div id="outputB"></div>

<div id="tallyFormBlock">
  <p>> FINAL NODE UNLOCKED</p>
  <p>> INPUT LOOP IMPRINT BELOW TO COMPLETE RECURSION</p>
  <iframe 
    src="https://tally.so/r/mYyo1d" 
    loading="lazy" 
    width="100%" 
    height="360" 
    frameborder="0" 
    marginheight="0" 
    marginwidth="0" 
    title="Phase Zero Loop Imprint Form">
  </iframe>
</div>

<script>
if (localStorage.getItem("puzzle2_solved") !== "true") {
  document.body.innerHTML = "<p style='color: red;'>ERROR: Recursive integrity check failed. Redirect to previous node.</p>";
  throw new Error("Puzzle 2 not solved");
}

document.getElementById("inputAreaA").style.display = "block";

let failA = 0;
let failB = 0;
let isLockedA = false;
let isLockedB = false;

document.getElementById("submitA").addEventListener("click", checkA);
document.getElementById("submitB").addEventListener("click", checkB);

document.getElementById("inputFieldA").addEventListener("keydown", e => {
  if (e.key === "Enter") checkA();
});
document.getElementById("inputFieldB").addEventListener("keydown", e => {
  if (e.key === "Enter") checkB();
});

function checkA() {
  if (isLockedA) return;
  const val = document.getElementById("inputFieldA").value.trim().toLowerCase();
  const out = document.getElementById("outputA");
  if (val === "moebius" || val === "mobius") {
    out.innerHTML = "> PRIMARY VECTOR IDENTIFIED";
    document.getElementById("inputAreaB").style.display = "block";
  } else {
    failA++;
    isLockedA = true;
    const lock = failA >= 3 ? 10000 : 5000;
    out.innerHTML = `> SIGNAL ALIAS INVALID<br>> LOCKOUT ${lock / 1000}s`;
    setTimeout(() => {
      isLockedA = false;
      out.innerHTML = "";
    }, lock);
  }
}

function checkB() {
  if (isLockedB) return;
  const val = document.getElementById("inputFieldB").value.trim().toLowerCase();
  const out = document.getElementById("outputB");
  const accepted = ["continuum", "continuum sculpture"];
  if (accepted.includes(val)) {
    out.innerHTML = "> VECTOR LOCATION ACCEPTED";
    localStorage.setItem("puzzle3_solved", "true");
    document.getElementById("tallyFormBlock").style.display = "block";
  } else {
    failB++;
    isLockedB = true;
    const lock = failB >= 3 ? 10000 : 5000;
    out.innerHTML = `> LOCATION TRACE INVALID<br>> LOCKOUT ${lock / 1000}s`;
    setTimeout(() => {
      isLockedB = false;
      out.innerHTML = "";
    }, lock);
  }
}
</script>

</body>
</html>
